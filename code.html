<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mess Pass â€” 30s Countdown</title>
  <meta name="description" content="Mess Pass card with live date/time and 30-second countdown. Ready for GitHub Pages." />
  <!-- Google font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --card-bg: #fff;
      --muted: #b7b7b7;
      --accent-green: #10ef2d;
      --accent-dark: #126016;
      --text: #222;
      --shadow: rgba(0,0,0,0.12);
      font-size: 16px;
    }
    *{box-sizing: border-box}
    html,body{height:100%;margin:0;padding:0;background:#f5f6f8;font-family: 'Poppins', Arial, sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
    .page{
      min-height:100vh;display:flex;align-items:center;justify-content:center;padding:20px
    }
    .container{
      width:100%;max-width:375px;background:var(--card-bg);border-radius:18px;padding:22px 24px 40px;position:relative;box-shadow:0 0 0 1px #e8e8e8,0 8px 24px var(--shadow)
    }
    .count-circle{
      position:absolute;top:14px;right:20px;background:var(--muted);border-radius:18px;min-width:36px;height:28px;line-height:28px;font-weight:800;font-size:14px;color:white;text-align:center;user-select:none;box-shadow:0 2px 6px rgba(0,0,0,0.3)
    }
    .header{display:flex;align-items:center;gap:14px;margin-bottom:16px}
    .photo{width:88px;height:88px;border-radius:50%;object-fit:cover;border:2px solid rgba(75,44,33,0.12);box-shadow:0 2px 6px rgba(0,0,0,0.15)}
    .info{flex:1}
    .meal-type{font-weight:900;font-size:28px;color:#000;margin-bottom:4px}
    .user-id{font-weight:700;font-size:18px}
    .user-name{font-weight:500;font-size:17px;margin-top:6px;color:var(--text)}
    .mess-center{font-weight:500;font-size:17px;margin-top:3px;color:var(--text)}
    .program-info{font-weight:600;font-size:16px;color:#4b2c2180;line-height:1.3;margin:30px 0 24px 0;user-select:text}
    .date-time{display:flex;justify-content:space-between;font-weight:700;font-size:18px;color:var(--text);margin-bottom:26px}
    .meal-approved{font-weight:800;font-size:21px;color:#30b520;text-align:center;margin-bottom:34px;text-shadow:0 0 10px #1c660d;user-select:none}
    .accepted-box{width:100%;max-width:335px;height:126px;background:var(--accent-dark);border-radius:30px;box-shadow:0 1px 12px rgba(255 255 255 / 0.15);margin:0 auto;display:flex;justify-content:center;align-items:center;gap:22px;padding:0 36px;color:var(--accent-green);font-size:33px;font-weight:700;text-shadow:0 0 18px var(--accent-green);user-select:none;position:relative}
    .accepted-box svg{width:50px;height:50px;stroke:currentColor;stroke-width:4;stroke-linejoin:round;stroke-linecap:round}
    #countCircle{font-size:18px;letter-spacing:0.03em}

    /* responsive tweaks */
    @media (min-width:420px){.container{max-width:420px}}

    /* small utility */
    .muted{color:#777;font-weight:500}

    /* focus outline for keyboard users */
    .accepted-box:focus{outline:3px solid rgba(16,239,45,0.18);outline-offset:4px}
  </style>
</head>
<body>
  <div class="page">
    <div class="container" role="region" aria-label="Mess Pass Card">
      <div class="count-circle" aria-live="polite" aria-atomic="true" id="countCircle">30</div>

      <div class="header">
        <!-- image: we try local file first; if missing we fall back to remote -->
        <img id="userPhoto" class="photo" src="./cherukusai.jpg" alt="User photo" onerror="this.onerror=null;this.src='https://i.postimg.cc/3NnwdHd3/cherukusai.jpg'" />

        <div class="info" aria-live="polite" aria-atomic="true">
          <div class="meal-type" id="mealType">Lunch</div>
          <div class="user-id" id="userId">12311129</div>
          <div class="user-name" id="userName">Cheruku Sai Kumar</div>
          <div class="mess-center" id="messCenter">Mess-Centre-02</div>
        </div>
      </div>

      <div class="program-info" id="programName">P132:B.Tech. (Computer Science and Engineering)(2023)</div>

      <section class="date-time" aria-label="Date and time">
        <div id="dateDisplay" class="muted">--</div>
        <div id="timeDisplay" class="muted">--</div>
      </section>

      <div class="meal-approved" aria-live="polite" aria-atomic="true" id="mealApprovedText">Meal Approved</div>

      <div class="accepted-box" role="img" aria-label="Meal Accepted" tabindex="0">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M20 6L9 17l-5-5" />
        </svg>
        ACCEPTED
      </div>
    </div>
  </div>

  <script>
    // -----------------------------
    // Config
    // -----------------------------
    const START_SECONDS = 30; // change if you want a different countdown

    // -----------------------------
    // Elements
    // -----------------------------
    const countCircle = document.getElementById('countCircle');
    const dateDisplay = document.getElementById('dateDisplay');
    const timeDisplay = document.getElementById('timeDisplay');

    // -----------------------------
    // Date & Time display
    // -----------------------------
    function formatDateTime(now){
      // date in format: 15 Nov 2025
      const options = { year:'numeric', month:'short', day:'2-digit' };
      const dateStr = now.toLocaleDateString('en-US', options).replace(',', '');

      // time in 12-hour format hh:mm AM/PM
      let hours = now.getHours();
      const minutes = now.getMinutes().toString().padStart(2,'0');
      const ampm = hours >= 12 ? 'PM' : 'AM';
      hours = hours % 12 || 12;
      const timeStr = `${hours}:${minutes} ${ampm}`;

      return {dateStr, timeStr};
    }

    function updateDateTime(){
      const now = new Date();
      const {dateStr, timeStr} = formatDateTime(now);
      dateDisplay.textContent = dateStr;
      timeDisplay.textContent = timeStr;
    }

    // Update every 1s so clock stays in sync
    setInterval(updateDateTime, 1000);
    updateDateTime();

    // -----------------------------
    // Countdown
    // -----------------------------
    let countdown = START_SECONDS;
    let countdownInterval = null;

    function renderCountdown(){
      // show leading zero if you prefer e.g. 09
      countCircle.textContent = countdown.toString();
    }

    function onCountdownEnd(){
      // visual state when time is up
      countCircle.textContent = '0';
      countCircle.style.background = '#ff4d4f';
      countCircle.setAttribute('aria-live','assertive');
      // update approved text to expired, if desired
      const mealApprovedText = document.getElementById('mealApprovedText');
      mealApprovedText.textContent = 'Expired';
      mealApprovedText.style.color = '#b00020';
      // stop interval already cleared by caller
    }

    function startCountdown(){
      // clear previous if any
      if(countdownInterval) clearInterval(countdownInterval);
      countdown = START_SECONDS;
      renderCountdown();

      countdownInterval = setInterval(()=>{
        countdown -= 1;
        if(countdown <= 0){
          clearInterval(countdownInterval);
          onCountdownEnd();
        } else {
          renderCountdown();
        }
      }, 1000);
    }

    // pause countdown when page hidden to avoid drift
    document.addEventListener('visibilitychange', ()=>{
      if(document.hidden){
        // pause
        if(countdownInterval) clearInterval(countdownInterval);
      } else {
        // resume from current value
        startCountdown();
      }
    });

    // start initially
    startCountdown();

    // -----------------------------
    // Small helper: make it easy to generate an index for GitHub Pages
    // -----------------------------
    // You can edit the constants at top or replace elements by id to customize.

    // -----------------------------
    // Optional: keyboard shortcut to reset timer (useful while testing)
    // -----------------------------
    window.addEventListener('keydown', (e)=>{
      if(e.key === 'r' || (e.ctrlKey && e.key === 'r')){
        // press 'r' to reset
        startCountdown();
      }
    });
  </script>
</body>
</html>
